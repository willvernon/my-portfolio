"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react");function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var i=e(t);const s=32,n=128,o={x:.5,y:.5},r="#2f4acf",a=2*Math.random()-1,c=.1*Math.random()-1,h=.5,l=.1,u=.001,f=.0095,_=.5;class d{points;ctx;_color;_mousePos;_canvas;_points;_radius;_position;_running;_smoothing;_markers;_showMousePosition;_speed;_friction;_elasticity;_acceleration;_radial;constructor(t,e,i,a,_,d,m,p,y,g){this.points=[],this._color=t??r,this._mousePos=o,this._points=e&&e>2?e:s,this._radius=n,this._position=o,this._running=!1,this._smoothing="boolean"!=typeof i||i,this._markers="boolean"==typeof a&&a,this._showMousePosition="boolean"==typeof _&&_,this._speed=d??h,this._friction=m??f,this._elasticity=p??u,this._acceleration=y??c,this._radial=g??l}init(){for(let t=0;t<this.numPoints;t++){let e=new m(this.divisional*(t+1),this);e.acceleration=a,this.push(e)}}render(){let t=this.canvas,e=this.ctx,i=this.points,s=this.numPoints,n=this.center;null!=e&&t&&e.clearRect(0,0,t.width,t.height),i[0].solveWith(i[s-1],i[1]);let o=i[s-1].position,r=i[0].position,a=r;e&&(e.beginPath(),e.moveTo(n.x,n.y),e.moveTo((o.x+r.x)/2,(o.y+r.y)/2));for(let t=1;t<s;t++){i[t].solveWith(i[t-1],i[t+1]||i[0]);let s=i[t].position;var c=(r.x+s.x)/2,h=(r.y+s.y)/2;this.smoothing&&e?.quadraticCurveTo(r.x,r.y,c,h),e&&(this.smoothing||e?.lineTo(s.x,s.y),e.fillStyle=this.color,this.markers&&e.fillRect(r.x-5,r.y-5,10,10)),r=s}c=(r.x+a.x)/2,h=(r.y+a.y)/2;if(e&&(e.fillStyle=this.color,e.fill(),e.strokeStyle=this.color),this.showMousePosition){let t=Math.atan2(this.mousePos.y,this.mousePos.x)+Math.PI;e?.fillRect(n.x+Math.cos(t)*this.radius,n.y+Math.sin(t)*this.radius,10,10)}requestAnimationFrame(this.render.bind(this))}push(t){t instanceof m&&this.points.push(t)}set color(t){this._color=t}get color(){return this._color}set smoothing(t){this._smoothing=t}get smoothing(){return this._smoothing}get friction(){return this._friction}get elasticity(){return this._elasticity}get acceleration(){return this._acceleration}get radial(){return this._radial}set markers(t){this._markers=t}get markers(){return this._markers}get speed(){return this._speed}set showMousePosition(t){this._showMousePosition=t}get showMousePosition(){return this._showMousePosition}set mousePos(t){this._mousePos=t}get mousePos(){return this._mousePos}set canvas(t){t instanceof HTMLElement&&"canvas"===t.tagName.toLowerCase()&&(this._canvas=t,this.ctx=this._canvas.getContext("2d"))}get canvas(){return this._canvas}set numPoints(t){t>2&&(this._points=t)}get numPoints(){return this._points}set radius(t){t>0&&(this._radius=t)}get radius(){return this._radius}set position(t){"object"==typeof t&&t.x&&t.y&&(this._position=t)}get position(){return this._position}get divisional(){return 2*Math.PI/this.numPoints}get center(){return this.canvas?{x:this.canvas.width*this.position.x,y:this.canvas.height*this.position.y}:o}set running(t){this._running=!0===t}get running(){return!1!==this.running}}class m{parent;azimuth;_acceleration;_components;_speed;_radialEffect;_elasticity;_friction;constructor(t,e){this.parent=e,this.azimuth=Math.PI-t,this._components={x:Math.cos(this.azimuth),y:Math.sin(this.azimuth)},this._acceleration=e.acceleration,this._speed=e.speed,this._radialEffect=e.radial,this._elasticity=e.elasticity,this._friction=e.friction}solveWith(t,e){this.acceleration=(-.3*this.radialEffect+(t.radialEffect-this.radialEffect)+(e.radialEffect-this.radialEffect))*this.elasticity-this.speed*this.friction}set acceleration(t){"number"==typeof t&&(this._acceleration=t,this.speed+=2*this._acceleration)}get acceleration(){return this._acceleration}set speed(t){"number"==typeof t&&(this._speed=t,this.radialEffect+=5*this._speed)}get speed(){return this._speed}set radialEffect(t){"number"==typeof t&&(this._radialEffect=t)}get radialEffect(){return this._radialEffect}get position(){return{x:this.parent.center.x+this.components.x*(this.parent.radius+this.radialEffect),y:this.parent.center.y+this.components.y*(this.parent.radius+this.radialEffect)}}get components(){return this._components}set elasticity(t){"number"==typeof t&&(this._elasticity=t)}get elasticity(){return this._elasticity}set friction(t){"number"==typeof t&&(this._friction=t)}get friction(){return this._friction}}const p=t.forwardRef(((e,o)=>{const{color:a=r,radius:m=n,sensitivity:p=_,points:y=s,speed:g=h,smoothing:x=!0,markers:v=!0,showMousePosition:E=!1,friction:M=f,elasticity:P=u,acceleration:w=c,radial:b=l,height:k=window.innerHeight}=e,[z,C]=t.useState(null),L=t.useRef(null),[X]=t.useState({x:0,y:0}),Y=t.useCallback((()=>{L.current&&L.current.parentElement&&(L.current.width=L.current.parentElement.clientWidth,L.current.height=k,z&&(z.color=a))}),[z,a,k]),q=t.useCallback((()=>{Y()}),[Y]);t.useEffect((()=>{Y()}),[Y]);const R=t.useCallback((t=>{if(z){const e=z.center,i={x:t.clientX-e.x,y:t.clientY-e.y},s=Math.sqrt(i.x*i.x+i.y*i.y);let n=null;if(z.mousePos={x:e.x-t.clientX,y:e.y-t.clientY},s<z.radius){const i={x:t.clientX+e.x,y:t.clientY+e.y};n=Math.atan2(i.y,i.x)+Math.random()}else if(s>z.radius){const i={x:t.clientX-e.x,y:t.clientY-e.y};n=Math.atan2(i.y,i.x)+Math.random()}if("number"==typeof n){let e=null,i=1;if(z.points.forEach((t=>{n&&Math.abs(n-t.azimuth)<i&&(e=t,i=Math.abs(n-t.azimuth))})),e){let i={x:X.x-t.clientX,y:X.y-t.clientY};i=Math.sqrt(i.x*i.x+i.y*i.y)*p,e.acceleration=i/100}}X.x=t.clientX,X.y=t.clientY}}),[z,X,p]);return t.useEffect((()=>{C(new d(a,y,x,v,E,g,M,P,w,b))}),[C]),t.useEffect((()=>{z&&L.current&&(z.canvas=L.current,z.radius=m,z.color=a)}),[z,a,m]),t.useEffect((()=>{z?.canvas&&(z?.init(),z.render())}),[z]),t.useEffect((()=>(window.addEventListener("resize",q),()=>{window.removeEventListener("resize",q)})),[q]),t.useEffect((()=>(document.addEventListener("mousemove",R),()=>{document.removeEventListener("mousemove",R)})),[R]),i.default.createElement("canvas",{"touch-action":"none",ref:L,height:k})}));exports.Blob=p;
//# sourceMappingURL=index.js.map
